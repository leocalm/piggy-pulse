<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>PiggyPulse - Categories Management Wireframe</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Sora:wght@600;700&display=swap" rel="stylesheet" />
<style>
:root {
  color-scheme: light dark;
  --accent-primary: #5E63E6;
  --accent-secondary: #8C6CFB;
  --bg: #F4F6FB;
  --surface: #FFFFFF;
  --surface-soft: #F9FAFD;
  --border-soft: #E6E8F0;
  --text-primary: #1A1D21;
  --text-secondary: #5C6470;
  --text-muted: #8B93A1;
  --focus-ring: rgba(94, 99, 230, 0.28);
  --overlay: rgba(12, 14, 20, 0.45);
}

body.dark {
  --bg: #14161A;
  --surface: #1C1F26;
  --surface-soft: #20242C;
  --border-soft: #2A2F38;
  --text-primary: #E6E8EB;
  --text-secondary: #A8AFB9;
  --text-muted: #7D8590;
  --focus-ring: rgba(140, 108, 251, 0.32);
  --overlay: rgba(3, 4, 7, 0.58);
}

@media (prefers-color-scheme: dark) {
  body:not(.light) {
    --bg: #14161A;
    --surface: #1C1F26;
    --surface-soft: #20242C;
    --border-soft: #2A2F38;
    --text-primary: #E6E8EB;
    --text-secondary: #A8AFB9;
    --text-muted: #7D8590;
    --focus-ring: rgba(140, 108, 251, 0.32);
    --overlay: rgba(3, 4, 7, 0.58);
  }
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: "Inter", sans-serif;
  background: var(--bg);
  color: var(--text-primary);
}

button,
input,
select,
textarea {
  font: inherit;
  color: inherit;
}

button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
a:focus-visible {
  outline: 2px solid var(--accent-primary);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px var(--focus-ring);
}

.shell-frame {
  max-width: 1100px;
  margin: 0 auto;
  padding: 16px 16px 96px;
}

.shell-app {
  border: 1px solid var(--border-soft);
  border-radius: 16px;
  background: var(--surface);
  overflow: hidden;
  display: grid;
  grid-template-columns: 1fr;
  grid-template-areas: "main";
}

.shell-sidebar {
  display: none;
  grid-area: sidebar;
  border-right: 1px solid var(--border-soft);
  background: var(--surface-soft);
  padding: 16px 12px;
}

.shell-group-title {
  margin: 14px 8px 6px;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-muted);
}

.shell-nav-list {
  display: grid;
  gap: 2px;
}

.shell-nav-item {
  display: block;
  border: 0;
  border-left: 4px solid transparent;
  border-radius: 10px;
  color: var(--text-secondary);
  text-decoration: none;
  padding: 10px 10px 10px 14px;
}

.shell-nav-item.active {
  border-left-color: var(--accent-primary);
  color: var(--text-primary);
  background: color-mix(in srgb, var(--accent-primary) 8%, var(--surface) 92%);
}

.shell-main {
  grid-area: main;
  position: relative;
}

.shell-main::before {
  content: "";
  position: absolute;
  top: 14px;
  right: 14px;
  width: 120px;
  height: 46px;
  border-radius: 999px;
  pointer-events: none;
  background: radial-gradient(circle at 16% 50%, color-mix(in srgb, var(--accent-primary, var(--accent, #5E63E6)) 16%, transparent 84%) 0 5px, transparent 6px),
              radial-gradient(circle at 36% 50%, color-mix(in srgb, var(--accent-primary, var(--accent, #5E63E6)) 16%, transparent 84%) 0 5px, transparent 6px),
              linear-gradient(100deg, transparent 0%, color-mix(in srgb, var(--accent-primary, var(--accent, #5E63E6)) 12%, transparent 88%) 42%, transparent 75%);
  opacity: 0.44;
}


.shell-topbar {
  border-bottom: 1px solid var(--border-soft);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
}

.shell-utility-row {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.shell-chip {
  border: 1px solid var(--border-soft);
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 12px;
  color: var(--text-secondary);
  background: var(--surface);
}

.shell-mobile-nav {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 70;
  display: flex;
  gap: 6px;
  padding: 8px;
  border-top: 1px solid var(--border-soft);
  background: var(--surface);
}

.shell-mobile-nav a,
.shell-mobile-nav button {
  flex: 1;
  border: 1px solid var(--border-soft);
  border-radius: 10px;
  color: var(--text-secondary);
  text-decoration: none;
  background: var(--surface);
  padding: 8px 10px;
  text-align: center;
  font-size: 12px;
  cursor: pointer;
}

.shell-mobile-nav .active {
  border-color: color-mix(in srgb, var(--accent-primary) 40%, var(--border-soft) 60%);
  background: color-mix(in srgb, var(--accent-primary) 8%, var(--surface) 92%);
  color: var(--text-primary);
}

.shell-drawer-layer {
  position: fixed;
  inset: 0;
  display: none;
  z-index: 75;
}

.shell-drawer-layer.open {
  display: block;
}

.shell-drawer-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
}

.shell-drawer-panel {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  border: 1px solid var(--border-soft);
  border-radius: 14px 14px 0 0;
  background: var(--surface);
  padding: 12px 14px 16px;
}

.shell-handle {
  width: 42px;
  height: 4px;
  border-radius: 999px;
  background: var(--border-soft);
  margin: 2px auto 10px;
}

.shell-more-nav {
  margin-top: 12px;
  display: grid;
  gap: 8px;
}

.shell-more-nav a {
  border: 1px solid var(--border-soft);
  border-radius: 10px;
  text-decoration: none;
  color: var(--text-secondary);
  padding: 9px 10px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.shell-more-nav .nav-icon {
  width: 18px;
  height: 18px;
  color: color-mix(in srgb, var(--accent-primary, var(--accent, #5E63E6)) 76%, var(--text-secondary) 24%);
}

.page {
  max-width: 1100px;
  margin: 0 auto;
  padding: 36px 24px 120px;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 16px;
  margin-bottom: 16px;
}

.page-title {
  margin: 0;
  font-size: 30px;
  font-weight: 700;
  letter-spacing: -0.02em;
}

.page-subtitle {
  margin: 8px 0 0;
  color: var(--text-secondary);
  font-size: 15px;
}

.mode-switch {
  margin-top: 12px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  border: 1px solid var(--border-soft);
  border-radius: 999px;
  background: var(--surface-soft);
  padding: 4px;
}

.mode-link {
  text-decoration: none;
  color: var(--text-secondary);
  font-size: 12px;
  font-weight: 600;
  padding: 6px 10px;
  border-radius: 999px;
}

.mode-link.active {
  color: var(--text-primary);
  background: var(--surface);
  border: 1px solid color-mix(in srgb, var(--accent-primary) 38%, var(--border-soft) 62%);
}

.primary-btn,
.secondary-btn,
.ghost-btn,
.danger-btn {
  border: 1px solid var(--border-soft);
  border-radius: 10px;
  padding: 9px 14px;
  background: var(--surface);
  cursor: pointer;
}

.primary-btn {
  border-color: var(--accent-primary);
  background: var(--accent-primary);
  color: #FFFFFF;
  font-weight: 600;
}

.secondary-btn {
  background: var(--surface-soft);
  color: var(--text-secondary);
}

.ghost-btn {
  background: transparent;
  color: var(--text-secondary);
}

.danger-btn {
  border-style: dashed;
  border-color: rgba(94, 99, 230, 0.4);
  background: rgba(94, 99, 230, 0.08);
  color: var(--text-secondary);
}

.desktop-add-label {
  display: inline;
}

.mobile-add-label {
  display: none;
}

.search-wrap {
  margin-bottom: 20px;
}

.search-input {
  width: 100%;
  border: 1px solid var(--border-soft);
  border-radius: 12px;
  background: var(--surface);
  padding: 12px 14px;
}

.state-switch {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin: 0 0 18px;
}

.state-pill {
  border: 1px solid var(--border-soft);
  background: var(--surface-soft);
  color: var(--text-secondary);
  border-radius: 999px;
  padding: 6px 12px;
  font-size: 12px;
  cursor: pointer;
}

.state-pill.active {
  border-color: var(--accent-primary);
  color: var(--accent-primary);
  background: rgba(94, 99, 230, 0.08);
}

.state-panel {
  display: none;
}

.state-panel.active {
  display: block;
}

.group {
  border: 1px solid var(--border-soft);
  border-radius: 16px;
  background: var(--surface);
  overflow: hidden;
  margin-bottom: 14px;
}

.group-title {
  margin: 0;
  padding: 13px 16px;
  border-bottom: 1px solid var(--border-soft);
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.08em;
  color: var(--text-secondary);
  text-transform: uppercase;
}

.row {
  display: grid;
  grid-template-columns: minmax(260px, 2fr) 1.3fr auto;
  gap: 10px;
  align-items: center;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border-soft);
}

.row:last-child {
  border-bottom: none;
}

.row.child {
  padding-left: 38px;
}

.identity {
  display: flex;
  align-items: flex-start;
  gap: 10px;
}

.icon {
  width: 32px;
  height: 32px;
  border: 1px solid var(--border-soft);
  border-radius: 9px;
  background: var(--surface-soft);
  display: grid;
  place-items: center;
  font-size: 14px;
  flex-shrink: 0;
}

.name {
  margin: 0;
  font-size: 15px;
  font-weight: 600;
}

.description {
  margin: 5px 0 0;
  font-size: 12px;
  color: var(--text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 360px;
}

.meta {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  align-items: baseline;
  flex-wrap: wrap;
  text-align: right;
}

.chip {
  border: 1px solid var(--border-soft);
  background: var(--surface-soft);
  color: var(--text-secondary);
  border-radius: 999px;
  padding: 4px 8px;
  font-size: 11px;
  font-weight: 500;
}

.chip.tx-count {
  color: var(--text-muted);
  border-style: dashed;
  opacity: 0.9;
}

.status {
  font-size: 12px;
  color: var(--text-secondary);
  min-width: 56px;
}

.actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  flex-wrap: wrap;
}

.action-btn {
  border: 1px solid var(--border-soft);
  background: var(--surface-soft);
  border-radius: 8px;
  padding: 6px 10px;
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
}

.action-btn.sub {
  border-color: rgba(94, 99, 230, 0.45);
  color: var(--accent-primary);
  background: rgba(94, 99, 230, 0.08);
  opacity: 0.78;
}

.row:hover .action-btn.sub,
.row:focus-within .action-btn.sub {
  opacity: 1;
}

.archived-shell {
  background: var(--surface-soft);
}

.archived-header {
  width: 100%;
  text-align: left;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 12px;
  padding: 14px 16px;
  cursor: pointer;
}

.archived-content {
  display: none;
  border-top: 1px dashed var(--border-soft);
}

.archived-content.open {
  display: block;
}

.empty,
.loading,
.error {
  border: 1px solid var(--border-soft);
  border-radius: 16px;
  background: var(--surface);
  padding: 30px 22px;
  color: var(--text-secondary);
}

.empty h2,
.error h2 {
  margin: 0 0 10px;
  color: var(--text-primary);
  font-size: 18px;
}

.empty p,
.error p {
  margin: 0 0 16px;
  max-width: 540px;
}

.ghost-loading {
  display: grid;
  gap: 8px;
}

.ghost-line {
  height: 10px;
  border-radius: 999px;
  background:
    linear-gradient(90deg, rgba(140, 147, 161, 0.08), rgba(140, 147, 161, 0.18), rgba(140, 147, 161, 0.08));
  background-size: 220% 100%;
  animation: ghost-sweep 1.6s linear infinite;
}

.ghost-line.w-100 { width: 100%; }
.ghost-line.w-80 { width: 80%; }
.ghost-line.w-60 { width: 60%; }
.ghost-line.block { height: 52px; border-radius: 10px; }

@keyframes ghost-sweep {
  from { background-position: 0% 0; }
  to { background-position: 220% 0; }
}

.overlay {
  position: fixed;
  inset: 0;
  background: var(--overlay);
  z-index: 80;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.overlay.open {
  display: flex;
}

.modal {
  width: min(560px, 100%);
  border: 1px solid var(--border-soft);
  border-radius: 14px;
  background: var(--surface);
  padding: 18px;
}

.modal h3 {
  margin: 0 0 10px;
  font-size: 20px;
}

.modal p {
  margin: 0 0 12px;
  color: var(--text-secondary);
  font-size: 14px;
}

.form-grid {
  display: grid;
  gap: 10px;
}

label {
  display: grid;
  gap: 6px;
  font-size: 13px;
  color: var(--text-secondary);
}

input,
select,
textarea {
  border: 1px solid var(--border-soft);
  border-radius: 10px;
  background: var(--surface);
  padding: 9px 10px;
}

.readonly {
  background: var(--surface-soft);
  color: var(--text-muted);
}

.helper {
  margin: 0;
  color: var(--text-muted);
  font-size: 12px;
}

.modal-actions {
  margin-top: 14px;
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.drawer {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 90;
  border-top-left-radius: 18px;
  border-top-right-radius: 18px;
  border: 1px solid var(--border-soft);
  background: var(--surface);
  padding: 16px;
  transform: translateY(100%);
  transition: transform 0.2s ease;
}

.drawer.open {
  transform: translateY(0);
}

.toast-note {
  position: fixed;
  right: 12px;
  bottom: 76px;
  z-index: 1300;
  border: 1px solid var(--border-soft);
  border-radius: 10px;
  background: var(--surface);
  color: var(--text-secondary);
  padding: 10px 12px;
  font-size: 12px;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.14);
  opacity: 0;
  pointer-events: none;
  transform: translateY(6px);
  transition: opacity 180ms ease, transform 180ms ease;
}

.toast-note.show {
  opacity: 1;
  transform: translateY(0);
}

.drawer-handle {
  width: 44px;
  height: 4px;
  border-radius: 6px;
  background: var(--border-soft);
  margin: 0 auto 12px;
}

@media (max-width: 920px) {
  .page {
    padding: 24px 14px 180px;
  }

  .page-header {
    align-items: center;
  }

  .page-title {
    font-size: 24px;
  }

  .page-subtitle {
    font-size: 13px;
  }

  .desktop-add-label {
    display: none;
  }

  .mobile-add-label {
    display: inline;
  }

  .page-header .primary-btn {
    min-width: 40px;
    min-height: 40px;
    padding: 7px 12px;
  }

  .group {
    border: none;
    background: transparent;
    margin-bottom: 20px;
  }

  .group-title {
    padding: 0 2px 10px;
    border-bottom: none;
  }

  .row {
    grid-template-columns: 1fr;
    gap: 8px;
    padding: 12px;
    border: 1px solid var(--border-soft);
    border-radius: 12px;
    background: var(--surface);
    margin-bottom: 8px;
  }

  .row.child {
    padding-left: 20px;
    margin-left: 16px;
  }

  .meta,
  .actions {
    justify-content: flex-start;
    text-align: left;
  }

  .description {
    max-width: none;
  }

  .action-btn.sub {
    opacity: 1;
  }
}

@media (min-width: 860px) {
  .shell-frame {
    padding: 24px 16px 64px;
  }

  .shell-app {
    grid-template-columns: 240px 1fr;
    grid-template-areas: "sidebar main";
  }

  .shell-sidebar {
    display: block;
  }

  .shell-mobile-nav {
    display: none;
  }
}

/* shell-playful-nav */
.page-title {
  font-family: "Sora", "Inter", sans-serif;
  font-weight: 700;
  letter-spacing: -0.015em;
}

.empty::before,
.loading::before {
  content: "";
  display: block;
  width: 74px;
  height: 22px;
  margin-bottom: 10px;
  border-radius: 999px;
  background: radial-gradient(circle at 16% 50%, rgba(94, 99, 230, 0.18) 0 4px, transparent 5px),
              radial-gradient(circle at 33% 50%, rgba(94, 99, 230, 0.18) 0 4px, transparent 5px),
              linear-gradient(90deg, transparent 0%, rgba(94, 99, 230, 0.14) 42%, transparent 76%);
}

.state-pill,
.shell-chip,
.chip {
  transition: background-color 180ms ease, border-color 180ms ease, color 180ms ease;
}

.shell-nav-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.shell-nav-item .nav-icon {
  width: 16px;
  text-align: center;
  opacity: 0.82;
  font-size: 13px;
  line-height: 1;
  width: 18px;
  height: 18px;
  color: color-mix(in srgb, var(--accent-primary, var(--accent, #5E63E6)) 74%, var(--text-secondary) 26%);
}

.shell-nav-item.active .nav-icon {
  opacity: 1;
}

.shell-mobile-nav a,
.shell-mobile-nav button {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
}

.shell-mobile-nav .nav-icon {
  font-size: 14px;
  line-height: 1;
  opacity: 0.9;
  width: 22px;
  height: 22px;
  color: color-mix(in srgb, var(--accent-primary, var(--accent, #5E63E6)) 80%, var(--text-secondary) 20%);
}

.shell-mobile-nav .nav-label {
  font-size: 11px;
  font-weight: 600;
  line-height: 1.1;
}

.nav-icon svg {
  width: 100%;
  height: 100%;
  stroke: currentColor;
  fill: none;
  stroke-width: 1.9;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.shell-main {
  position: relative;
}

.shell-main::before {
  content: "";
  position: absolute;
  top: 14px;
  right: 14px;
  width: 120px;
  height: 46px;
  border-radius: 999px;
  pointer-events: none;
  background: radial-gradient(circle at 16% 50%, rgba(94, 99, 230, 0.12) 0 5px, transparent 6px),
              radial-gradient(circle at 36% 50%, rgba(94, 99, 230, 0.12) 0 5px, transparent 6px),
              linear-gradient(100deg, transparent 0%, rgba(94, 99, 230, 0.1) 42%, transparent 75%);
  opacity: 0.44;
}

@media (max-width: 860px) {
  .shell-main::before {
    display: none;
  }
}

</style>
</head>
<body>
<main class="shell-frame">
  <div class="shell-app">
    <aside class="shell-sidebar" aria-label="Primary navigation">
      <div class="shell-group-title">Core</div>
      <nav class="shell-nav-list">
        <a class="shell-nav-item" href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12l-2 0l9 -9l9 9l-2 0"/><path d="M5 12v7a1 1 0 0 0 1 1h4v-6h4v6h4a1 1 0 0 0 1 -1v-7"/></svg></span><span class="nav-label">Dashboard</span></a>
        <a class="shell-nav-item" href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M9 6h11"/><path d="M9 12h11"/><path d="M9 18h11"/><path d="M5 6v.01"/><path d="M5 12v.01"/><path d="M5 18v.01"/></svg></span><span class="nav-label">Transactions</span></a>
        <a class="shell-nav-item" href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"/><path d="M16 3v4"/><path d="M8 3v4"/><path d="M4 11h16"/></svg></span><span class="nav-label">Periods</span></a>
      </nav>
      <div class="shell-group-title">Structure</div>
      <nav class="shell-nav-list">
        <a class="shell-nav-item" href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 7h12a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-8a2 2 0 0 1 2 -2"/><path d="M4 10h16"/><path d="M9 14h6"/></svg></span><span class="nav-label">Accounts</span></a>
        <a class="shell-nav-item active" href="#" aria-current="page"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 7h16v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"/><path d="M4 11h16"/><path d="M9 15h2"/><path d="M13 15h4"/></svg></span><span class="nav-label">Categories</span></a>
        <a class="shell-nav-item" href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 9l1 -4h16l1 4"/><path d="M5 9v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1 -1v-10"/><path d="M10 13h4v7h-4z"/></svg></span><span class="nav-label">Vendors</span></a>
      </nav>
      <div class="shell-group-title">Session</div>
      <nav class="shell-nav-list">
        <a class="shell-nav-item" href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 8h10"/><path d="M14 16h6"/><path d="M6 12h14"/><path d="M8 8v8"/><path d="M16 12v8"/></svg></span><span class="nav-label">Settings</span></a>
        <a class="shell-nav-item" href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M14 8v-2a2 2 0 0 0 -2 -2h-5a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5a2 2 0 0 0 2 -2v-2"/><path d="M9 12h12l-3 -3"/><path d="M18 15l3 -3"/></svg></span><span class="nav-label">Logout</span></a>
      </nav>
    </aside>
    <section class="shell-main">
      <header class="shell-topbar">
        <div class="shell-utility-row">
          <span class="shell-chip">Section: Categories</span>
          <span class="shell-chip">Mode: Management</span>
        </div>
      </header>
<div class="page">
  <header class="page-header">
    <div>
      <h1 class="page-title">Categories</h1>
      <p class="page-subtitle">Define and organize your budgeting structure</p>
      <nav class="mode-switch" aria-label="Categories page mode">
        <a class="mode-link" href="../categories/piggypulse-categories.html">Overview</a>
        <a class="mode-link active" href="../category-management/piggypulse-categories-management.html" aria-current="page">Management</a>
      </nav>
    </div>
    <button class="primary-btn" type="button" data-open="create-trigger">
      <span class="desktop-add-label">+ Add Category</span>
      <span class="mobile-add-label">+</span>
    </button>
  </header>

  <section class="search-wrap" aria-label="Category search filter">
    <input class="search-input" type="search" placeholder="Search categories..." />
  </section>

  <section class="state-switch" aria-label="Wireframe state switcher">
    <button class="state-pill active" type="button" data-state="default">Default</button>
    <button class="state-pill" type="button" data-state="empty">Empty</button>
    <button class="state-pill" type="button" data-state="loading">Loading</button>
    <button class="state-pill" type="button" data-state="error">Error</button>
  </section>

  <section class="state-panel active" data-panel="default" aria-label="Default state">
    <article class="group">
      <h2 class="group-title">Incoming</h2>

      <div class="row">
        <div class="identity">
          <div class="icon" aria-hidden="true">üíº</div>
          <div>
            <p class="name">Salary</p>
            <p class="description">Recurring monthly income from employer</p>
          </div>
        </div>
        <div class="meta">
          <span class="chip tx-count">34 transactions</span>
          <span class="status">Active</span>
        </div>
        <div class="actions">
          <button class="action-btn" type="button" data-open="edit-category">Edit</button>
          <button class="action-btn" type="button" data-open="archive-confirm">Archive</button>
        </div>
      </div>

      <div class="row">
        <div class="identity">
          <div class="icon" aria-hidden="true">‚Ü©Ô∏è</div>
          <div>
            <p class="name">Refund</p>
            <p class="description">Returned purchases and reimbursement entries</p>
          </div>
        </div>
        <div class="meta">
          <span class="chip tx-count">8 transactions</span>
          <span class="status">Active</span>
        </div>
        <div class="actions">
          <button class="action-btn" type="button" data-open="edit-category">Edit</button>
          <button class="action-btn" type="button" data-open="archive-confirm">Archive</button>
          <button class="action-btn" type="button" data-open="delete-confirm">Delete</button>
        </div>
      </div>
    </article>

    <article class="group">
      <h2 class="group-title">Outgoing</h2>

      <div class="row">
        <div class="identity">
          <div class="icon" aria-hidden="true">üçΩÔ∏è</div>
          <div>
            <p class="name">Dining</p>
            <p class="description">Meals outside home and food delivery</p>
          </div>
        </div>
        <div class="meta">
          <span class="chip tx-count">21 transactions</span>
          <span class="status">Active</span>
        </div>
        <div class="actions">
          <button class="action-btn" type="button" data-open="edit-category">Edit</button>
          <button class="action-btn" type="button" data-open="archive-blocked">Archive</button>
          <button class="action-btn sub" type="button" data-open="create-subcategory">+ Subcategory</button>
        </div>
      </div>

      <div class="row child">
        <div class="identity">
          <div class="icon" aria-hidden="true">üç¥</div>
          <div>
            <p class="name">Restaurants</p>
            <p class="description">Table service and casual dining purchases</p>
          </div>
        </div>
        <div class="meta">
          <span class="chip tx-count">12 transactions</span>
          <span class="status">Active</span>
        </div>
        <div class="actions">
          <button class="action-btn" type="button" data-open="edit-category">Edit</button>
          <button class="action-btn" type="button" data-open="archive-confirm">Archive</button>
        </div>
      </div>

      <div class="row child">
        <div class="identity">
          <div class="icon" aria-hidden="true">‚òï</div>
          <div>
            <p class="name">Coffee</p>
            <p class="description">Cafe and beverage purchases</p>
          </div>
        </div>
        <div class="meta">
          <span class="chip tx-count">9 transactions</span>
          <span class="status">Active</span>
        </div>
        <div class="actions">
          <button class="action-btn" type="button" data-open="edit-category">Edit</button>
          <button class="action-btn" type="button" data-open="archive-confirm">Archive</button>
        </div>
      </div>

      <div class="row">
        <div class="identity">
          <div class="icon" aria-hidden="true">üè†</div>
          <div>
            <p class="name">Housing</p>
            <p class="description">Rent and recurring home-related costs</p>
          </div>
        </div>
        <div class="meta">
          <span class="chip tx-count">17 transactions</span>
          <span class="status">Active</span>
        </div>
        <div class="actions">
          <button class="action-btn" type="button" data-open="edit-category">Edit</button>
          <button class="action-btn" type="button" data-open="archive-blocked">Archive</button>
          <button class="action-btn sub" type="button" data-open="create-subcategory">+ Subcategory</button>
        </div>
      </div>

      <div class="row child">
        <div class="identity">
          <div class="icon" aria-hidden="true">üí°</div>
          <div>
            <p class="name">Utilities</p>
            <p class="description">Electricity, water, and internet bills</p>
          </div>
        </div>
        <div class="meta">
          <span class="chip tx-count">7 transactions</span>
          <span class="status">Active</span>
        </div>
        <div class="actions">
          <button class="action-btn" type="button" data-open="edit-category">Edit</button>
          <button class="action-btn" type="button" data-open="archive-confirm">Archive</button>
        </div>
      </div>
    </article>

    <article class="group archived-shell">
      <button class="archived-header" type="button" id="archived-toggle" aria-expanded="false" aria-controls="archived-content">Archived (3) ‚ñ∏</button>
      <div class="archived-content" id="archived-content">
        <div class="row">
          <div class="identity">
            <div class="icon" aria-hidden="true">üóÇÔ∏è</div>
            <div>
              <p class="name">Old Category</p>
              <p class="description">Legacy category kept for history integrity</p>
            </div>
          </div>
          <div class="meta">
            <span class="chip">Type: Outgoing</span>
            <span class="status">Archived</span>
          </div>
          <div class="actions">
            <button class="action-btn" type="button" data-open="edit-category">Edit</button>
            <button class="action-btn" type="button">Restore</button>
          </div>
        </div>

        <div class="row">
          <div class="identity">
            <div class="icon" aria-hidden="true">üìÅ</div>
            <div>
              <p class="name">Old Parent</p>
              <p class="description">Parent archived after subcategories were archived</p>
            </div>
          </div>
          <div class="meta">
            <span class="chip">Type: Outgoing</span>
            <span class="status">Archived</span>
          </div>
          <div class="actions">
            <button class="action-btn" type="button" data-open="edit-category">Edit</button>
            <button class="action-btn" type="button">Restore</button>
          </div>
        </div>

        <div class="row child">
          <div class="identity">
            <div class="icon" aria-hidden="true">üß©</div>
            <div>
              <p class="name">Old Child</p>
              <p class="description">Child remains linked to archived parent</p>
            </div>
          </div>
          <div class="meta">
            <span class="status">Archived</span>
          </div>
          <div class="actions">
            <button class="action-btn" type="button" data-open="edit-category">Edit</button>
            <button class="action-btn" type="button">Restore</button>
          </div>
        </div>
      </div>
    </article>
  </section>

  <section class="state-panel" data-panel="empty" aria-label="Empty state">
    <article class="empty">
      <h2>No categories defined yet.</h2>
      <p>Create your first category to organize incoming and outgoing transactions.
      This space will fill as your period structure takes shape.</p>
      <button class="primary-btn" type="button" data-open="create-trigger">Add Category</button>
    </article>
  </section>

  <section class="state-panel" data-panel="loading" aria-label="Loading state">
    <article class="loading">
      <div class="ghost-loading" aria-hidden="true">
        <div class="ghost-line w-100"></div>
        <div class="ghost-line w-80"></div>
        <div class="ghost-line block"></div>
        <div class="ghost-line block"></div>
        <div class="ghost-line block"></div>
      </div>
      <p class="inline-hint">Loading category structure</p>
    </article>
  </section>

  <section class="state-panel" data-panel="error" aria-label="Error state">
    <article class="error">
      <h2>Categories could not be loaded right now.</h2>
      <p>Your existing structure is unchanged. Retry to load categories and actions.</p>
      <button class="secondary-btn" type="button">Retry</button>
    </article>
  </section>
</div>
    </section>
  </div>
</main>

<nav class="shell-mobile-nav" aria-label="Mobile primary navigation">
  <a href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12l-2 0l9 -9l9 9l-2 0"/><path d="M5 12v7a1 1 0 0 0 1 1h4v-6h4v6h4a1 1 0 0 0 1 -1v-7"/></svg></span><span class="nav-label">Dashboard</span></a>
  <a href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M9 6h11"/><path d="M9 12h11"/><path d="M9 18h11"/><path d="M5 6v.01"/><path d="M5 12v.01"/><path d="M5 18v.01"/></svg></span><span class="nav-label">Transactions</span></a>
  <a href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"/><path d="M16 3v4"/><path d="M8 3v4"/><path d="M4 11h16"/></svg></span><span class="nav-label">Periods</span></a>
  <button class="active" type="button" id="shell-open-more"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/></svg></span><span class="nav-label">More</span></button>
</nav>

<div class="shell-drawer-layer" id="shell-mobile-drawer" aria-hidden="true">
  <div class="shell-drawer-backdrop" id="shell-close-more"></div>
  <section class="shell-drawer-panel" role="dialog" aria-modal="true" aria-label="More">
    <div class="shell-handle" aria-hidden="true"></div>
    <nav class="shell-more-nav">
      <a href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 7h12a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-8a2 2 0 0 1 2 -2"/><path d="M4 10h16"/><path d="M9 14h6"/></svg></span><span class="nav-label">Accounts</span></a>
      <a href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 7h16v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"/><path d="M4 11h16"/><path d="M9 15h2"/><path d="M13 15h4"/></svg></span><span class="nav-label">Categories</span></a>
      <a href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 9l1 -4h16l1 4"/><path d="M5 9v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1 -1v-10"/><path d="M10 13h4v7h-4z"/></svg></span><span class="nav-label">Vendors</span></a>
      <a href="#"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 8h10"/><path d="M14 16h6"/><path d="M6 12h14"/><path d="M8 8v8"/><path d="M16 12v8"/></svg></span><span class="nav-label">Settings</span></a>
    </nav>
  </section>
</div>

<div class="overlay" id="create-category">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="create-category-title">
    <h3 id="create-category-title">Create Category</h3>
    <form class="form-grid" data-enter-submit="create-submit">
      <label>Name
        <input type="text" placeholder="Category name" />
      </label>
      <label>Type
        <select>
          <option>Incoming</option>
          <option>Outgoing</option>
        </select>
      </label>
      <label>Icon (optional)
        <input type="text" placeholder="Example: house" />
      </label>
      <label>Description (optional)
        <textarea rows="2" placeholder="Short structural description"></textarea>
      </label>
      <div class="modal-actions">
        <button class="ghost-btn" type="button" data-close="create-category">Cancel</button>
        <button class="primary-btn" type="button" id="create-submit">Create</button>
      </div>
    </form>
  </div>
</div>

<div class="overlay" id="create-subcategory">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="create-subcategory-title">
    <h3 id="create-subcategory-title">Create Subcategory</h3>
    <form class="form-grid" data-enter-submit="create-subcategory-submit">
      <label>Parent
        <input class="readonly" type="text" value="Dining" readonly />
      </label>
      <label>Type
        <input class="readonly" type="text" value="Outgoing" readonly />
      </label>
      <label>Name
        <input type="text" placeholder="Subcategory name" />
      </label>
      <label>Icon (optional)
        <input type="text" placeholder="Example: fork-knife" />
      </label>
      <label>Description (optional)
        <textarea rows="2" placeholder="Short structural description"></textarea>
      </label>
      <div class="modal-actions">
        <button class="ghost-btn" type="button" data-close="create-subcategory">Cancel</button>
        <button class="primary-btn" type="button" id="create-subcategory-submit">Create</button>
      </div>
    </form>
  </div>
</div>

<div class="overlay" id="edit-category">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="edit-category-title">
    <h3 id="edit-category-title">Edit Category</h3>
    <form class="form-grid" data-enter-submit="edit-submit">
      <label>Name
        <input type="text" value="Dining" />
      </label>
      <label>Type
        <input class="readonly" type="text" value="Outgoing" readonly />
      </label>
      <p class="helper">Type cannot be changed after the first transaction exists.</p>
      <p class="helper">Re-parenting is available only when transaction count is 0.</p>
      <p class="helper">Parent selection is not editable in v1 on this page.</p>
      <label>Icon (optional)
        <input type="text" value="fork-knife" />
      </label>
      <label>Description (optional)
        <textarea rows="2">Meals outside home and food delivery</textarea>
      </label>
      <div class="modal-actions">
        <button class="ghost-btn" type="button" data-close="edit-category">Cancel</button>
        <button class="primary-btn" type="button" id="edit-submit">Save</button>
      </div>
    </form>
  </div>
</div>

<div class="overlay" id="archive-confirm">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="archive-confirm-title">
    <h3 id="archive-confirm-title">Archive Category</h3>
    <p>This will archive the category. Historical transactions remain unchanged.</p>
    <p>Archived categories cannot be used for new transactions.</p>
    <div class="modal-actions">
      <button class="ghost-btn" type="button" data-close="archive-confirm">Cancel</button>
      <button class="secondary-btn" type="button" id="archive-confirm-submit">Archive</button>
    </div>
  </div>
</div>

<div class="overlay" id="archive-blocked">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="archive-blocked-title">
    <h3 id="archive-blocked-title">Archive Category</h3>
    <p>This category has active subcategories. Archive subcategories first.</p>
    <div class="modal-actions">
      <button class="secondary-btn" type="button" data-close="archive-blocked">OK</button>
    </div>
  </div>
</div>

<div class="overlay" id="delete-confirm">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="delete-confirm-title">
    <h3 id="delete-confirm-title">Delete Category</h3>
    <p>This category has no transactions and no subcategories. It will be permanently removed.</p>
    <div class="modal-actions">
      <button class="ghost-btn" type="button" data-close="delete-confirm">Cancel</button>
      <button class="danger-btn" type="button" id="delete-confirm-submit">Delete</button>
    </div>
  </div>
</div>

<div class="overlay" id="mobile-drawer-overlay" aria-hidden="true"></div>
<section class="drawer" id="mobile-drawer" aria-label="Mobile create drawer">
  <div class="drawer-handle" aria-hidden="true"></div>
  <h3 style="margin:0 0 10px;font-size:18px;">Create Category</h3>
  <form class="form-grid" data-enter-submit="drawer-submit">
    <label>Name
      <input type="text" placeholder="Category name" />
    </label>
    <label>Type
      <select>
        <option>Incoming</option>
        <option>Outgoing</option>
      </select>
    </label>
    <label>Description (optional)
      <textarea rows="2" placeholder="Short structural description"></textarea>
    </label>
    <div class="modal-actions" style="margin-top:6px;">
      <button class="ghost-btn" type="button" data-close-drawer="mobile-drawer">Cancel</button>
      <button class="primary-btn" type="button" id="drawer-submit">Create</button>
    </div>
  </form>
</section>

<section class="drawer" id="mobile-edit-drawer" aria-label="Mobile edit drawer">
  <div class="drawer-handle" aria-hidden="true"></div>
  <h3 style="margin:0 0 10px;font-size:18px;">Edit Category</h3>
  <form class="form-grid" data-enter-submit="drawer-edit-submit">
    <label>Name
      <input type="text" value="Dining" />
    </label>
    <label>Type
      <input class="readonly" type="text" value="Outgoing" readonly />
    </label>
    <p class="helper">Type cannot be changed after the first transaction exists.</p>
    <p class="helper">Re-parenting is available only when transaction count is 0.</p>
    <p class="helper">Parent selection is not editable in v1 on this page.</p>
    <label>Description (optional)
      <textarea rows="2">Meals outside home and food delivery</textarea>
    </label>
    <div class="modal-actions" style="margin-top:6px;">
      <button class="ghost-btn" type="button" data-close-drawer="mobile-edit-drawer">Cancel</button>
      <button class="primary-btn" type="button" id="drawer-edit-submit">Save</button>
    </div>
  </form>
</section>
<div class="toast-note" id="actionToast" aria-live="polite"></div>

<script>
(() => {
  const body = document.body;
  const shellMobileDrawer = document.getElementById("shell-mobile-drawer");
  const shellOpenMore = document.getElementById("shell-open-more");
  const shellCloseMore = document.getElementById("shell-close-more");
  const archivedToggle = document.getElementById("archived-toggle");
  const archivedContent = document.getElementById("archived-content");
  const actionToast = document.getElementById("actionToast");
  let toastTimer;

  const openShellMore = () => {
    shellMobileDrawer.classList.add("open");
    shellMobileDrawer.setAttribute("aria-hidden", "false");
  };

  const closeShellMore = () => {
    shellMobileDrawer.classList.remove("open");
    shellMobileDrawer.setAttribute("aria-hidden", "true");
  };

  const showToast = (message) => {
    if (!actionToast) {
      return;
    }
    actionToast.textContent = message;
    actionToast.classList.add("show");
    clearTimeout(toastTimer);
    toastTimer = window.setTimeout(() => actionToast.classList.remove("show"), 2400);
  };

  if (shellOpenMore) {
    shellOpenMore.addEventListener("click", openShellMore);
  }

  if (shellCloseMore) {
    shellCloseMore.addEventListener("click", closeShellMore);
  }

  archivedToggle.addEventListener("click", () => {
    const open = archivedContent.classList.toggle("open");
    archivedToggle.setAttribute("aria-expanded", String(open));
    archivedToggle.textContent = open ? "Archived (3) ‚ñæ" : "Archived (3) ‚ñ∏";
  });

  document.querySelectorAll("[data-state]").forEach((btn) => {
    btn.addEventListener("click", () => {
      const state = btn.getAttribute("data-state");
      document.querySelectorAll("[data-state]").forEach((item) => item.classList.remove("active"));
      btn.classList.add("active");
      document.querySelectorAll("[data-panel]").forEach((panel) => {
        panel.classList.toggle("active", panel.getAttribute("data-panel") === state);
      });
    });
  });

  const closeAllOverlays = () => {
    document.querySelectorAll(".overlay.open").forEach((el) => el.classList.remove("open"));
  };

  const closeAllDrawers = () => {
    document.getElementById("mobile-drawer-overlay").classList.remove("open");
    document.getElementById("mobile-drawer").classList.remove("open");
    document.getElementById("mobile-edit-drawer").classList.remove("open");
  };

  const openDrawer = (drawerId) => {
    closeAllDrawers();
    document.getElementById("mobile-drawer-overlay").classList.add("open");
    document.getElementById(drawerId).classList.add("open");
  };

  document.querySelectorAll("[data-open]").forEach((btn) => {
    btn.addEventListener("click", () => {
      const targetId = btn.getAttribute("data-open");
      if (targetId === "create-trigger") {
        const responsiveTarget = window.matchMedia("(max-width: 920px)").matches ? "mobile-drawer" : "create-category";
        if (responsiveTarget === "mobile-drawer") {
          openDrawer("mobile-drawer");
          return;
        }
        closeAllOverlays();
        document.getElementById("create-category").classList.add("open");
        return;
      }
      if (targetId === "edit-category" && window.matchMedia("(max-width: 920px)").matches) {
        openDrawer("mobile-edit-drawer");
        return;
      }
      if (targetId === "mobile-drawer") {
        openDrawer("mobile-drawer");
        return;
      }
      closeAllOverlays();
      const overlay = document.getElementById(targetId);
      if (overlay) overlay.classList.add("open");
    });
  });

  document.querySelectorAll("[data-close]").forEach((btn) => {
    btn.addEventListener("click", () => {
      const target = document.getElementById(btn.getAttribute("data-close"));
      if (target) target.classList.remove("open");
    });
  });

  document.querySelectorAll("[data-close-drawer]").forEach((btn) => {
    btn.addEventListener("click", closeAllDrawers);
  });

  document.getElementById("mobile-drawer-overlay").addEventListener("click", closeAllDrawers);

  document.addEventListener("keydown", (event) => {
    if (event.key === "Escape") {
      closeShellMore();
      closeAllOverlays();
      closeAllDrawers();
    }
  });

  const archiveSubmit = document.getElementById("archive-confirm-submit");
  if (archiveSubmit) {
    archiveSubmit.addEventListener("click", () => {
      document.getElementById("archive-confirm").classList.remove("open");
      showToast("Category archived. History remains unchanged.");
    });
  }

  const deleteSubmit = document.getElementById("delete-confirm-submit");
  if (deleteSubmit) {
    deleteSubmit.addEventListener("click", () => {
      document.getElementById("delete-confirm").classList.remove("open");
      showToast("Category removed from structure.");
    });
  }

  document.querySelectorAll("form[data-enter-submit]").forEach((form) => {
    const submitId = form.getAttribute("data-enter-submit");
    const finalField = form.querySelector("textarea, input:last-of-type, select:last-of-type");
    if (!finalField) return;
    finalField.addEventListener("keydown", (event) => {
      if (event.key === "Enter" && !event.shiftKey) {
        event.preventDefault();
        const targetButton = document.getElementById(submitId);
        if (targetButton) targetButton.click();
      }
    });
  });
})();
</script>
</body>
</html>
